$(function(){if(parentExists()){resize_myframe()}if($("#newCustomerLayer").length){$("#newCustomerLayer").show().find("select").sSelect({ddMaxHeight:"300px"})}if($("#reservation").length){$(".changeOccupantCount").find("select").sSelect({ddMaxHeight:"300px"})}if($("#financialContener").length){$("#client_due_type").find("select").sSelect({ddMaxHeight:"300px"})}if($("#option").length){$("#option").find("select").sSelect({ddMaxHeight:"300px"})}if($("#paiement").length){$("#paiement").find("select").sSelect({ddMaxHeight:"300px"})}if($("#customerAreaContener").length){$("#customerAreaContener").find("select").sSelect({ddMaxHeight:"300px"})}});head.ready(function(){if($("#yourStay").length&&$("#contentContener").hasClass("detail")){$("#promoContener").before($("#stayOptions"))}if($("#reservation").length){if($("#stayOptions").find(".control_checkbox").length){enableClickOnLabel($("#stayOptions").find(".control_checkbox"))}if($("#accomodationOptions").find(".control_checkbox").length){enableClickOnLabel($("#accomodationOptions").find(".control_checkbox"))}if($("#financialContener .radioDesc").length){$("#financialContener .radioDesc").equalizeHeights()}}var checked;if($("#authentication").length){$(".authenticationChoice").click(function(e){resize_myframe()});if(checked!=undefined){$("#returningCustomerYes").trigger("click")}else{if($("#returningCustomerYes").is(":checked")){checked=true;$("#existingCustomerLayer").show();$("#newCustomerLayer").hide()}else if($("#returningCustomerNo").is(":checked")){checked=false;$("#existingCustomerLayer").hide();$("#newCustomerLayer").show()}}}$(".selectedTxt").click(function(){if(!$(this).parent().hasClass("newListSelFocus")){var selectWidth=$(this).parent().width();$(this).next(".SSContainerDivWrapper").show();var selectUlWidth=$(this).next(".SSContainerDivWrapper").width();if($(this).next(".SSContainerDivWrapper").hasClass("maxHeight")&&!$(this).next(".SSContainerDivWrapper").hasClass("minWidth")&&selectUlWidth>=selectWidth){$(this).next(".SSContainerDivWrapper").css({minWidth:selectUlWidth+33});$(this).next(".SSContainerDivWrapper").addClass("minWidth")}else if($(this).next(".SSContainerDivWrapper").hasClass("minWidth")){return false}}});if($("#contentContener.detail").length){var d=new Date;var y=d.getFullYear();var onBlurAction;$(".anOccupant").find(".control_date").attr("readonly","readonly").on("focus",function(e){$(this).attr("onblur","");$(this).datepicker("option","disabled")});$(".anOccupant").each(function(index,value){var datepickerInput=$(this).find(".control_date");onBlurAction=datepickerInput.attr("onblur");function beforeShow(){onBlurAction=onBlurAction.replace(";;",";").replace("if( !checkFutureDate( this ) ) return false; ","");if(onBlurAction.substring(0,1)==";"){onBlurAction=onBlurAction.substring(1,onBlurAction.length-1)}}function onSelect(){datepickerInput.attr("onblur",onBlurAction);eval(onBlurAction)}if($(this).hasClass("adult")){datepickerInput.datepicker({changeMonth:true,changeYear:true,yearRange:"1900:+0",defaultDate:datepickerInput.val(),maxDate:"-13y",showOn:"both",beforeShow:beforeShow,onSelect:onSelect});var defaultDate=datepickerInput.datepicker("option","defaultDate");var maxDate=datepickerInput.datepicker("option","maxDate")}else if($(this).hasClass("child")){datepickerInput.datepicker({changeMonth:true,changeYear:true,yearRange:"-13:+0",defaultDate:datepickerInput.val(),minDate:"-13y +1d",maxDate:"Y",showOn:"both",beforeShow:beforeShow,onSelect:onSelect})}else{datepickerInput.datepicker({changeMonth:true,changeYear:true,yearRange:"1900:+0",maxDate:"y",showOn:"both",beforeShow:beforeShow,onSelect:onSelect})}})}if($("#contentContener.summary").length||$("#contentContener.editAccount").length){var d=new Date;var y=d.getFullYear();$("#address").find(".control_date").datepicker({changeMonth:true,changeYear:true,yearRange:"1900:2000",defaultDate:new Date(y-18,1-1,1),maxDate:"-18Y",showOn:"button"})}if($("#newCustomerLayer").length){$("#customerLogin input").keypress(function(e){if(e.which==32){e.preventDefault()}}).blur(function(e){$(this).val($(this).val().replace(/ /g,""))})}if($("#existingCustomerLayer").length){$("#existing_customer_login").keypress(function(e){if(e.which==32){e.preventDefault()}}).blur(function(e){$(this).val($(this).val().replace(/ /g,""))})}});function consoleLog(data){if(window.console&&console.log)console.log(data)}function parentExists(){return parent.location==window.location?false:true}$.fn.equalizeHeights=function(){var maxHeight=this.map(function(i,e){return $(e).height()}).get();return this.height(Math.max.apply(this,maxHeight))};function resize_myframe(){var height=$("body").height();height+=70;window.parent.document.getElementById("frameResalys").style.height=height+"px"}function enableClickOnLabel(checkboxes){checkboxes.each(function(i,v){if($(this).parent().next().hasClass("optionLabel")){var checkbox=$(this);var labelCheckbox=checkbox.parent().next();labelCheckbox.wrapInner("<label />");labelCheckbox=labelCheckbox.children("label");var forId;if(checkbox.attr("id")==undefined){if(checkbox.parents("#stayOptions").length){forId="stayOption"+i}else if(checkbox.parents("#accomodationOptions").length){forId="accomodationOption"+i}}else{forId=checkbox.attr("id")}checkbox.attr("id",forId);labelCheckbox.attr("for",forId)}})}