<?xml version="1.0" encoding="UTF-8"?>
<database name="cungfoo" namespace="Cungfoo\Model" defaultIdMethod="native">

    <!-- ====================
                BEHAVIOR
         ==================== -->
    <behavior name="i18n">
        <parameter name="default_locale" value="fr" />
    </behavior>

    <!-- ====================
                CONTEXTS
         ==================== -->
    <table name="site">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="name" type="varchar" />
        <column name="order" type="integer" />
    </table>

    <table name="domaine">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="name" type="varchar" />
        <column name="order" type="integer" />
    </table>

    <!-- ====================
                JOB
         ==================== -->
    <table name="job">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="name" type="varchar" required="false"/>
        <column name="type" type="varchar" size="50" required="true"/>
        <column name="params" type="clob"/>
        <column name="message" type="longvarchar"/>
        <column name="completed_at" type="timestamp"/>
        <column name="status" type="integer" defaultValue="2"/>
        <behavior name="timestampable" />
    </table>

    <table name="job_log">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="job_id" type="integer" required="true"/>
        <column name="level" type="enum" valueSet="error, info" required="true"/>
        <column name="message" type="clob"/>
        <behavior name="timestampable" />

        <foreign-key foreignTable="job" onDelete="cascade">
            <reference local="job_id" foreign="id"/>
        </foreign-key>
    </table>

    <!-- ====================
                SCHEMA
         ==================== -->
    <table name="etablissement">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="integer" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="title" type="varchar" />
        <column name="address1" type="varchar" />
        <column name="address2" type="varchar" />
        <column name="zip" type="varchar" />
        <column name="city" type="varchar" />
        <column name="mail" type="varchar" />
        <column name="country" type="varchar" />
        <column name="country_code" type="varchar" />
        <column name="phone1" type="varchar" />
        <column name="phone2" type="varchar" />
        <column name="fax" type="varchar" />
        <column name="opening_date" type="timestamp" />
        <column name="closing_date" type="timestamp" />
        <column name="ville_id" type="integer"/>
        <column name="categorie_id" type="integer"/>
        <column name="geo_coordinate_x" type="varchar" />
        <column name="geo_coordinate_y" type="varchar" />
        <column name="video_path" type="varchar" />
        <column name="image_360_path" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="capacite" type="varchar" />
        <column name="ouverture_reception" type="longvarchar" />
        <column name="ouverture_camping" type="longvarchar" />
        <column name="arrivees_departs" type="longvarchar" />
        <column name="plan_path" type="varchar" />
        <column name="vignette" type="varchar" />

        <column name="published" type="boolean" />

        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="ville" onDelete="SETNULL">
            <reference local="ville_id" foreign="id"></reference>
        </foreign-key>

        <foreign-key foreignTable="categorie" onDelete="SETNULL">
            <reference local="categorie_id" foreign="id"></reference>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="country,ouverture_reception,ouverture_camping,arrivees_departs,description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/etablissement" />
            <parameter name="crud_search" value="name, title" />
            <parameter name="crud_type_file" value="plan_path, vignette" />
        </behavior>
    </table>

    <table name="etablissement_type_hebergement" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true" />
        <column name="type_hebergement_id" type="integer" primaryKey="true"/>
        <column name="minimum_price" type="varchar" />
        <column name="minimum_price_discount_label" type="varchar" />
        <column name="minimum_price_start_date" type="date" />
        <column name="minimum_price_end_date" type="date" />

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="type_hebergement" onDelete="CASCADE">
            <reference local="type_hebergement_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_destination" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="destination_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="destination">
            <reference local="destination_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_activite" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="activite_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="activite">
            <reference local="activite_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_service_complementaire" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="service_complementaire_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="service_complementaire">
            <reference local="service_complementaire_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_situation_geographique" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="situation_geographique_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="situation_geographique">
            <reference local="situation_geographique_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_baignade" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="baignade_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="baignade">
            <reference local="baignade_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_thematique" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="thematique_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="thematique">
            <reference local="thematique_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_point_interet" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="point_interet_id" type="integer" primaryKey="true"/>
        <column name="distance" type="varchar"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="point_interet">
            <reference local="point_interet_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_event" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="event_id" type="integer" primaryKey="true"/>
        <column name="distance" type="varchar"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="event">
            <reference local="event_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="type_hebergement">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="category_type_hebergement_id" type="integer" />
        <column name="nombre_chambre" type="integer" />
        <column name="nombre_place" type="integer" />
        <column name="surface" type="varchar" />
        <column name="type_terrasse" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="image_hebergement_path" type="varchar" />
        <column name="composition" type="longvarchar" />
        <column name="image_composition_path" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="category_type_hebergement">
            <reference local="category_type_hebergement_id" foreign="id"></reference>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name,surface,type_terrasse,description,composition" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/type-hebergement" />
            <parameter name="crud_type_file" value="image_hebergement_path, image_composition_path" />
        </behavior>
    </table>

    <table name="category_type_hebergement">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/category-type-hebergement" />
        </behavior>
    </table>

    <table name="ville">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="introduction" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="region_id" type="integer" />
        <column name="image_detail_1" type="varchar" />
        <column name="image_detail_2" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="region" onDelete="SETNULL">
            <reference local="region_id" foreign="id"></reference>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name,introduction,description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/villes" />
            <parameter name="crud_type_file" value="image_detail_1,image_detail_2" />
        </behavior>
    </table>

    <table name="region">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="introduction" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="image_path" type="varchar" />
        <column name="image_encart_path" type="varchar" />
        <column name="image_encart_petite_path" type="varchar" />
        <column name="pays_id" type="integer" />
        <column name="mea_home" type="boolean" />
        <column name="image_detail_1" type="varchar" />
        <column name="image_detail_2" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="pays" onDelete="SETNULL">
            <reference local="pays_id" foreign="id"></reference>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name,introduction,description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/regions" />
            <parameter name="crud_type_file" value="image_path,image_encart_path,image_encart_petite_path,image_detail_1,image_detail_2" />
        </behavior>
    </table>

    <table name="pays">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="introduction" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="image_detail_1" type="varchar" />
        <column name="image_detail_2" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name,introduction,description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/pays" />
            <parameter name="crud_type_file" value="image_detail_1,image_detail_2" />
        </behavior>
    </table>

    <table name="destination">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/destinations" />
        </behavior>
    </table>

    <table name="activite">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="description" type="varchar" />
        <column name="keywords" type="varchar" />
        <column name="image_path" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description, keywords" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/activites" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

    <table name="categorie">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/categories" />
        </behavior>
    </table>

    <table name="situation_geographique">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="description" type="varchar" />
        <column name="keywords" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description, keywords" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/situation-geographiques" />
        </behavior>
    </table>

    <table name="baignade">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="description" type="varchar" />
        <column name="keywords" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description, keywords" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/baignades" />
        </behavior>
    </table>

    <table name="thematique">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="description" type="varchar" />
        <column name="keywords" type="varchar" />
        <column name="image_path" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description, keywords" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/thematiques" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

    <table name="service_complementaire">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="description" type="varchar" />
        <column name="keywords" type="varchar" />
        <column name="image_path" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description, keywords" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/services-complementaires" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

    <table name="point_interet">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="address" type="varchar" />
        <column name="address2" type="varchar" />
        <column name="zipcode" type="varchar" />
        <column name="city" type="varchar" />
        <column name="geo_coordinate_x" type="varchar" />
        <column name="geo_coordinate_y" type="varchar" />
        <column name="distance_camping" type="varchar" />
        <column name="image" type="varchar" />
        <column name="presentation" type="longvarchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name,presentation" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/points-interet" />
        </behavior>
    </table>

    <table name="event">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="category" type="varchar" />
        <column name="str_date" type="varchar" />
        <column name="address" type="varchar" />
        <column name="address2" type="varchar" />
        <column name="zipcode" type="varchar" />
        <column name="city" type="varchar" />
        <column name="geo_coordinate_x" type="varchar" />
        <column name="geo_coordinate_y" type="varchar" />
        <column name="distance_camping" type="varchar" />
        <column name="image" type="varchar" />
        <column name="priority" type="varchar" />
        <column name="subtitle" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name,str_date,subtitle" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/events" />
        </behavior>
    </table>

    <table name="personnage">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="etablissement_id" type="integer" />
        <column name="prenom" type="varchar" required="true" />
        <column name="age" type="varchar" required="true" />
        <column name="image_path" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="prenom" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/personnages" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

    <table name="avantage">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="personnage_id" type="integer" />
        <column name="name" type="varchar" required="true" />
        <column name="description" type="longvarchar" required="true" />
        <column name="image_path" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="personnage" onDelete="CASCADE">
            <reference local="personnage_id" foreign="id"/>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/personnages-avantages" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

    <table name="multimedia_etablissement">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="etablissement_id" type="integer" />
        <column name="titre" type="varchar" required="true" />
        <column name="image_path" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="titre" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/multimedias" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

    <table name="multimedia_etablissement_tag" isCrossRef="true">
        <column name="multimedia_etablissement_id" type="integer" primaryKey="true"/>
        <column name="tag_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="multimedia_etablissement" onDelete="CASCADE">
            <reference local="multimedia_etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="tag">
            <reference local="tag_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="tag">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="name" type="varchar" required="true" />
        <column name="slug" type="varchar" required="true" primaryString="true"/>
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/tag-multimedias" />
        </behavior>
    </table>

    <table name="edito">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="slug" type="varchar"/>
        <column name="name" type="varchar" required="false"/>
        <column name="description" type="longvarchar" required="true"/>
        <behavior name="timestampable" />
        <behavior name="active" />

        <unique name="unique_slug">
            <unique-column name="slug"/>
        </unique>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/editos" />
            <parameter name="crud_type_richtext" value="description" />
        </behavior>
    </table>

    <table name="demande_identifiant">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="societe_nom" type="varchar" required="true"/>
        <column name="societe_adresse_1" type="varchar" required="true"/>
        <column name="societe_adresse_2" type="varchar"/>
        <column name="societe_adresse_3" type="varchar"/>
        <column name="societe_adresse_4" type="varchar"/>
        <column name="societe_telephone" type="varchar"/>
        <column name="societe_fax" type="varchar"/>
        <column name="contact_prenom" type="varchar" required="true"/>
        <column name="contact_nom" type="varchar" required="true"/>
        <column name="contact_telephone" type="varchar"/>
        <column name="contact_mail" type="varchar" required="true"/>
        <column name="permanence" type="varchar"/>
        <column name="permanence_matin_de" type="varchar"/>
        <column name="permanence_matin_a" type="varchar"/>
        <column name="permanence_apres_midi_de" type="varchar"/>
        <column name="permanence_apres_midi_a" type="varchar"/>
        <column name="client_vc" type="boolean"/>
        <column name="client_vc_code" type="varchar"/>
        <column name="client_vd" type="boolean"/>
        <column name="client_vd_code" type="varchar"/>
        <column name="brochure" type="boolean"/>
        <column name="identifiant" type="boolean"/>
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/demandes-identifiant" />
        </behavior>
    </table>

    <table name="top_camping">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="etablissement_id" type="integer" required="true"/>
        <behavior name="sortable"/>
        <behavior name="active" />

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/top-camping" />
        </behavior>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="dernieres_minutes">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="date_start" type="date"/>
        <column name="day_start" type="enum" valueSet="monday, tuesday, wednesday, thursday, friday, saturday, sunday" required="true"/>
        <column name="day_range" type="enum" valueSet="7, 14, 21" required="true"/>
        <column name="active" type="boolean"/>
        <behavior name="active" />

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/dernieres-minutes" />
        </behavior>
    </table>

    <table name="dernieres_minutes_etablissement" isCrossRef="true">
        <column name="dernieres_minutes_id" type="integer" primaryKey="true"/>
        <column name="etablissement_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="dernieres_minutes" onDelete="CASCADE">
            <reference local="dernieres_minutes_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="etablissement">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="dernieres_minutes_destination" isCrossRef="true">
        <column name="dernieres_minutes_id" type="integer" primaryKey="true"/>
        <column name="destination_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="dernieres_minutes" onDelete="CASCADE">
            <reference local="dernieres_minutes_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="destination">
            <reference local="destination_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="mise_en_avant">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="image_fond_path" type="varchar"/>
        <column name="titre" type="varchar"/>
        <column name="accroche" type="varchar"/>
        <column name="lien" type="varchar"/>
        <column name="titre_lien" type="varchar"/>
        <column name="prix" type="varchar"/>
        <column name="illustration_path" type="varchar"/>
        <column name="date_fin_validite" type="date"/>
        <behavior name="sortable"/>
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="titre, accroche, lien, titre_lien" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/mise-en-avant" />
            <parameter name="crud_type_file" value="image_fond_path, illustration_path" />
        </behavior>
    </table>

    <table name="vos_vacances">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="titre" type="varchar"/>
        <column name="description" type="varchar"/>
        <column name="prenom" type="varchar"/>
        <column name="age" type="varchar"/>
        <column name="image_path" type="varchar"/>

        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="titre, description, prenom" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/vos-vacances" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

    <table name="idee_weekend">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="titre" type="varchar"/>
        <column name="highlight" type="boolean"/>
        <column name="prix" type="varchar"/>
        <column name="home" type="boolean"/>
        <column name="lien" type="varchar"/>
        <column name="image_path" type="varchar"/>

        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="titre" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/idee-weekend" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

</database>
