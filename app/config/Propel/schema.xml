<?xml version="1.0" encoding="UTF-8"?>
<database name="cungfoo" namespace="Cungfoo\Model" defaultIdMethod="native" baseClass="Propel\BaseObject">

    <!-- ====================
                BEHAVIOR
         ==================== -->
    <behavior name="i18n">
        <parameter name="default_locale" value="fr" />
    </behavior>

    <!-- ====================
                JOB
         ==================== -->
    <table name="job">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="name" type="varchar" required="false"/>
        <column name="type" type="varchar" size="50" required="true"/>
        <column name="params" type="clob"/>
        <column name="message" type="longvarchar"/>
        <column name="completed_at" type="timestamp"/>
        <column name="status" type="integer" defaultValue="2"/>
        <behavior name="timestampable" />
    </table>

    <table name="job_log">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="job_id" type="integer" required="true"/>
        <column name="level" type="enum" valueSet="error, info" required="true"/>
        <column name="message" type="clob"/>
        <behavior name="timestampable" />

        <foreign-key foreignTable="job" onDelete="cascade">
            <reference local="job_id" foreign="id"/>
        </foreign-key>
    </table>

    <!-- ====================
                SCHEMA
         ==================== -->
    <table name="etablissement">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="integer" required="true" />
        <column name="slug" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="title" type="varchar" />
        <column name="address1" type="varchar" />
        <column name="address2" type="varchar" />
        <column name="zip" type="varchar" />
        <column name="city" type="varchar" />
        <column name="mail" type="varchar" />
        <column name="country" type="varchar" />
        <column name="country_code" type="varchar" />
        <column name="phone1" type="varchar" />
        <column name="phone2" type="varchar" />
        <column name="fax" type="varchar" />
        <column name="opening_date" type="timestamp" />
        <column name="closing_date" type="timestamp" />
        <column name="ville_id" type="integer"/>
        <column name="departement_id" type="integer"/>
        <column name="categorie_id" type="integer"/>
        <column name="geo_coordinate_x" type="varchar" />
        <column name="geo_coordinate_y" type="varchar" />
        <column name="video_path" type="varchar" />
        <column name="image_360_path" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="capacite" type="varchar" />
        <column name="ouverture_reception" type="longvarchar" />
        <column name="ouverture_camping" type="longvarchar" />
        <column name="arrivees_departs" type="longvarchar" />
        <column name="plan_path" type="varchar" />
        <column name="vignette" type="varchar" />
        <column name="related_1" type="integer" />
        <column name="related_2" type="integer" />

        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="ville" onDelete="SETNULL">
            <reference local="ville_id" foreign="id"></reference>
        </foreign-key>

        <foreign-key foreignTable="departement" onDelete="SETNULL">
            <reference local="departement_id" foreign="id"></reference>
        </foreign-key>

        <foreign-key foreignTable="categorie" onDelete="SETNULL">
            <reference local="categorie_id" foreign="id"></reference>
        </foreign-key>

        <foreign-key foreignTable="etablissement" onDelete="SETNULL">
            <reference local="related_1" foreign="id"></reference>
        </foreign-key>

        <foreign-key foreignTable="etablissement" onDelete="SETNULL">
            <reference local="related_2" foreign="id"></reference>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="country,ouverture_reception,ouverture_camping,arrivees_departs,description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/etablissement" />
            <parameter name="crud_search" value="name, title" />
            <parameter name="crud_type_file" value="plan_path, vignette" />
            <parameter name="crud_type_richtext" value="description" />
        </behavior>
    </table>

    <table name="etablissement_type_hebergement" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true" />
        <column name="type_hebergement_id" type="integer" primaryKey="true"/>
        <column name="minimum_price" type="varchar" />
        <column name="minimum_price_discount_label" type="varchar" />
        <column name="minimum_price_start_date" type="date" />
        <column name="minimum_price_end_date" type="date" />

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="type_hebergement" onDelete="CASCADE">
            <reference local="type_hebergement_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_destination" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="destination_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="destination" onDelete="CASCADE">
            <reference local="destination_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_activite" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="activite_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="activite" onDelete="CASCADE">
            <reference local="activite_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_service_complementaire" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="service_complementaire_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="service_complementaire" onDelete="CASCADE">
            <reference local="service_complementaire_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_situation_geographique" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="situation_geographique_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="situation_geographique" onDelete="CASCADE">
            <reference local="situation_geographique_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_baignade" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="baignade_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="baignade" onDelete="CASCADE">
            <reference local="baignade_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_thematique" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="thematique_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="thematique" onDelete="CASCADE">
            <reference local="thematique_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_point_interet" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="point_interet_id" type="integer" primaryKey="true"/>
        <column name="distance" type="varchar"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="point_interet" onDelete="CASCADE">
            <reference local="point_interet_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="etablissement_event" isCrossRef="true">
        <column name="etablissement_id" type="integer" primaryKey="true"/>
        <column name="event_id" type="integer" primaryKey="true"/>
        <column name="distance" type="varchar"/>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="event" onDelete="CASCADE">
            <reference local="event_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="type_hebergement">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="slug" type="varchar" />
        <column name="indice" type="varchar" />
        <column name="type_hebergement_capacite_id" type="integer" />
        <column name="category_type_hebergement_id" type="integer" />
        <column name="nombre_chambre" type="integer" />
        <column name="nombre_place" type="integer" />
        <column name="surface" type="varchar" />
        <column name="type_terrasse" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="image_hebergement_path" type="varchar" />
        <column name="composition" type="longvarchar" />
        <column name="image_composition_path" type="varchar" />
        <column name="presentation" type="longvarchar" />
        <column name="capacite_hebergement" type="longvarchar" />
        <column name="dimensions" type="longvarchar" />
        <column name="agencement" type="longvarchar" />
        <column name="equipements" type="longvarchar" />
        <column name="annee_utilisation" type="longvarchar" />
        <column name="remarque_1" type="longvarchar" />
        <column name="remarque_2" type="longvarchar" />
        <column name="remarque_3" type="longvarchar" />
        <column name="remarque_4" type="longvarchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="category_type_hebergement" onDelete="SETNULL">
            <reference local="category_type_hebergement_id" foreign="id"></reference>
        </foreign-key>

        <foreign-key foreignTable="type_hebergement_capacite" onDelete="SETNULL">
            <reference local="type_hebergement_capacite_id" foreign="id"></reference>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name,slug,indice,surface,type_terrasse,description,composition,presentation,capacite_hebergement,dimensions,agencement,equipements,annee_utilisation,remarque_1,remarque_2,remarque_3,remarque_4" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/type-hebergement" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_file" value="image_hebergement_path, image_composition_path" />
        </behavior>
    </table>

    <table name="type_hebergement_capacite">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="name" type="varchar" required="true" />
        <column name="slug" type="varchar" />
        <column name="accroche" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="image_menu" type="varchar" />
        <column name="image_page" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />
        <behavior name="sortable" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name,slug,accroche,description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/type-hebergement-capacite" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_file" value="image_menu,image_page" />
        </behavior>
    </table>

    <table name="category_type_hebergement">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="slug" type="varchar" />
        <column name="accroche" type="varchar" />
        <column name="minimum_price" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="image_menu" type="varchar" />
        <column name="image_page" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />
        <behavior name="sortable" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name,slug,accroche,description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/category-type-hebergement" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_file" value="image_menu,image_page" />
        </behavior>
    </table>

    <table name="ville">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="slug" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="introduction" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="region_id" type="integer" />
        <column name="image_detail_1" type="varchar" />
        <column name="image_detail_2" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="region" onDelete="SETNULL">
            <reference local="region_id" foreign="id"></reference>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="slug,name,introduction,description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/villes" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_file" value="image_detail_1,image_detail_2" />
        </behavior>
    </table>

    <table name="region">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="slug" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="introduction" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="image_path" type="varchar" />
        <column name="image_encart_path" type="varchar" />
        <column name="image_encart_petite_path" type="varchar" />
        <column name="pays_id" type="integer" />
        <column name="destination_id" type="integer" />
        <column name="mea_home" type="boolean" />
        <column name="image_detail_1" type="varchar" />
        <column name="image_detail_2" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="pays" onDelete="SETNULL">
            <reference local="pays_id" foreign="id"></reference>
        </foreign-key>

        <foreign-key foreignTable="destination">
            <reference local="destination_id" foreign="id"/>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="slug,name,introduction,description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/regions" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_file" value="image_path,image_encart_path,image_encart_petite_path,image_detail_1,image_detail_2" />
        </behavior>
    </table>

    <table name="region_ref">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="pays_id" type="integer" />
        <column name="slug" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="introduction" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="image_detail_1" type="varchar" />
        <column name="image_detail_2" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="pays" onDelete="SETNULL">
            <reference local="pays_id" foreign="id"></reference>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="slug,name,introduction,description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/regions_ref" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_file" value="image_detail_1,image_detail_2" />
        </behavior>
    </table>

    <table name="departement">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="region_ref_id" type="integer" />
        <column name="slug" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="introduction" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="image_detail_1" type="varchar" />
        <column name="image_detail_2" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="region_ref" onDelete="SETNULL">
            <reference local="region_ref_id" foreign="id"></reference>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="slug,name,introduction,description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/departements" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_file" value="image_detail_1,image_detail_2" />
        </behavior>
    </table>

    <table name="pays">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="slug" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="introduction" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="image_detail_1" type="varchar" />
        <column name="image_detail_2" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="slug,name,introduction,description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/pays" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_file" value="image_detail_1,image_detail_2" />
        </behavior>
    </table>

    <table name="destination">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="slug" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="introduction" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="image_detail_1" type="varchar" />
        <column name="image_detail_2" type="varchar" />

        <behavior name="timestampable" />
        <behavior name="sortable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="slug,name,introduction,description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/destinations" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_file" value="image_detail_1,image_detail_2" />
        </behavior>
    </table>

    <table name="activite">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="description" type="varchar" />
        <column name="keywords" type="varchar" />
        <column name="image_path" type="varchar" />
        <column name="vignette" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description, keywords" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/activites" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_file" value="image_path, vignette" />
        </behavior>
    </table>

    <table name="categorie">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/categories" />
            <parameter name="crud_search" value="name" />
        </behavior>
    </table>

    <table name="situation_geographique">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="description" type="varchar" />
        <column name="keywords" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description, keywords" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/situation-geographiques" />
            <parameter name="crud_search" value="name" />
        </behavior>
    </table>

    <table name="baignade">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="description" type="varchar" />
        <column name="keywords" type="varchar" />
        <column name="image_path" type="varchar" />
        <column name="vignette" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description, keywords" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/baignades" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_file" value="image_path, vignette" />
        </behavior>
    </table>

    <table name="thematique">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="description" type="varchar" />
        <column name="keywords" type="varchar" />
        <column name="image_path" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description, keywords" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/thematiques" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

    <table name="service_complementaire">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="description" type="varchar" />
        <column name="keywords" type="varchar" />
        <column name="image_path" type="varchar" />
        <column name="vignette" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description, keywords" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/services-complementaires" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_file" value="image_path, vignette" />
        </behavior>
    </table>

    <table name="point_interet">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="address" type="varchar" />
        <column name="address2" type="varchar" />
        <column name="zipcode" type="varchar" />
        <column name="city" type="varchar" />
        <column name="tel" type="varchar" />
        <column name="fax" type="varchar" />
        <column name="email" type="varchar" />
        <column name="transport" type="longvarchar" />
        <column name="website" type="varchar" />
        <column name="categorie" type="varchar" />
        <column name="type" type="varchar" />
        <column name="geo_coordinate_x" type="varchar" />
        <column name="geo_coordinate_y" type="varchar" />
        <column name="distance_camping" type="varchar" />
        <column name="image" type="varchar" />
        <column name="presentation" type="longvarchar" />
        <column name="slug" type="varchar"/>
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name,presentation,transport,categorie,type, slug" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/points-interet" />
            <parameter name="crud_search" value="name" />
        </behavior>
    </table>

    <table name="event">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="code" type="varchar" required="true" />
        <column name="name" type="varchar" required="true" />
        <column name="category" type="varchar" />
        <column name="str_date" type="varchar" />
        <column name="address" type="varchar" />
        <column name="address2" type="varchar" />
        <column name="zipcode" type="varchar" />
        <column name="city" type="varchar" />
        <column name="geo_coordinate_x" type="varchar" />
        <column name="geo_coordinate_y" type="varchar" />
        <column name="distance_camping" type="varchar" />
        <column name="image" type="varchar" />
        <column name="priority" type="varchar" />
        <column name="subtitle" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="tel" type="varchar" />
        <column name="fax" type="varchar" />
        <column name="email" type="varchar" />
        <column name="website" type="varchar" />
        <column name="transport" type="longvarchar" />
        <column name="slug" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, str_date,subtitle, description, transport, slug" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/events" />
            <parameter name="crud_search" value="name" />
        </behavior>
    </table>

    <table name="personnage">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="etablissement_id" type="integer" />
        <column name="prenom" type="varchar" required="true" />
        <column name="age" type="varchar" required="true" />
        <column name="image_path" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="prenom" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/personnages" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

    <table name="avantage">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="personnage_id" type="integer" />
        <column name="name" type="varchar" required="true" />
        <column name="description" type="longvarchar" required="true" />
        <column name="image_path" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="personnage" onDelete="CASCADE">
            <reference local="personnage_id" foreign="id"/>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/personnages-avantages" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

    <table name="multimedia_type_hebergement">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="type_hebergement_id" type="integer" />
        <column name="titre" type="varchar" required="true" />
        <column name="image_path" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="type_hebergement" onDelete="CASCADE">
            <reference local="type_hebergement_id" foreign="id"/>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="titre" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/multimedias/type-hebergement" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

    <table name="multimedia_etablissement">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="etablissement_id" type="integer" />
        <column name="titre" type="varchar" required="true" />
        <column name="image_path" type="varchar" />
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="titre" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/multimedias/etablissement" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

    <table name="multimedia_etablissement_tag" isCrossRef="true">
        <column name="multimedia_etablissement_id" type="integer" primaryKey="true"/>
        <column name="tag_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="multimedia_etablissement" onDelete="CASCADE">
            <reference local="multimedia_etablissement_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="tag" onDelete="CASCADE">
            <reference local="tag_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="tag">
        <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
        <column name="name" type="varchar" required="true" />
        <column name="slug" type="varchar" required="true" primaryString="true"/>
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/tag-multimedias" />
        </behavior>
    </table>

    <table name="edito">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="slug" type="varchar"/>
        <column name="name" type="varchar" required="false"/>
        <column name="description" type="longvarchar" required="true"/>
        <behavior name="timestampable" />
        <behavior name="active" />

        <unique name="unique_slug">
            <unique-column name="slug"/>
        </unique>

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/editos" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_richtext" value="description" />
        </behavior>
    </table>

    <table name="demande_identifiant">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="societe_nom" type="varchar" required="true"/>
        <column name="societe_adresse_1" type="varchar" required="true"/>
        <column name="societe_adresse_2" type="varchar"/>
        <column name="societe_adresse_3" type="varchar"/>
        <column name="societe_adresse_4" type="varchar"/>
        <column name="societe_telephone" type="varchar"/>
        <column name="societe_fax" type="varchar"/>
        <column name="contact_prenom" type="varchar" required="true"/>
        <column name="contact_nom" type="varchar" required="true"/>
        <column name="contact_telephone" type="varchar"/>
        <column name="contact_mail" type="varchar" required="true"/>
        <column name="permanence" type="varchar"/>
        <column name="permanence_matin_de" type="varchar"/>
        <column name="permanence_matin_a" type="varchar"/>
        <column name="permanence_apres_midi_de" type="varchar"/>
        <column name="permanence_apres_midi_a" type="varchar"/>
        <column name="client_vc" type="boolean"/>
        <column name="client_vc_code" type="varchar"/>
        <column name="client_vd" type="boolean"/>
        <column name="client_vd_code" type="varchar"/>
        <column name="brochure" type="boolean"/>
        <column name="identifiant" type="boolean"/>
        <behavior name="timestampable" />
        <behavior name="active" />

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/demandes-identifiant" />
        </behavior>
    </table>

    <table name="top_camping">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="etablissement_id" type="integer" required="true"/>
        <behavior name="sortable"/>
        <behavior name="active" />

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/top-camping" />
        </behavior>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="mise_en_avant">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="image_fond_path" type="varchar"/>
        <column name="titre" type="varchar"/>
        <column name="accroche" type="varchar"/>
        <column name="lien" type="varchar"/>
        <column name="titre_lien" type="varchar"/>
        <column name="prix" type="varchar"/>
        <column name="illustration_path" type="varchar"/>
        <column name="date_fin_validite" type="date"/>
        <behavior name="sortable"/>
        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="titre, accroche, lien, titre_lien" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/mise-en-avant" />
            <parameter name="crud_type_file" value="image_fond_path, illustration_path" />
        </behavior>
    </table>

    <table name="vos_vacances">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="titre" type="varchar"/>
        <column name="description" type="varchar"/>
        <column name="prenom" type="varchar"/>
        <column name="age" type="varchar"/>
        <column name="image_path" type="varchar"/>

        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="titre, description, prenom" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/vos-vacances" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

    <table name="idee_weekend">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="titre" type="varchar"/>
        <column name="highlight" type="boolean"/>
        <column name="prix" type="varchar"/>
        <column name="home" type="boolean"/>
        <column name="lien" type="varchar"/>
        <column name="image_path" type="varchar"/>

        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="titre, lien" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/idee-weekend" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

    <table name="theme">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="name" type="varchar"/>
        <column name="slug" type="varchar"/>
        <column name="introduction" type="varchar"/>
        <column name="description" type="longvarchar"/>
        <column name="image_path" type="varchar"/>

        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, slug, introduction, description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/theme" />
            <parameter name="crud_search" value="name" />
            <parameter name="crud_type_file" value="image_path" />
        </behavior>
    </table>

    <table name="theme_activite" isCrossRef="true">
        <column name="theme_id" type="integer" primaryKey="true"/>
        <column name="activite_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="theme" onDelete="CASCADE">
            <reference local="theme_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="activite" onDelete="CASCADE">
            <reference local="activite_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="theme_baignade" isCrossRef="true">
        <column name="theme_id" type="integer" primaryKey="true"/>
        <column name="baignade_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="theme" onDelete="CASCADE">
            <reference local="theme_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="baignade" onDelete="CASCADE">
            <reference local="baignade_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="theme_service_complementaire" isCrossRef="true">
        <column name="theme_id" type="integer" primaryKey="true"/>
        <column name="service_complementaire_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="theme" onDelete="CASCADE">
            <reference local="theme_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="service_complementaire" onDelete="CASCADE">
            <reference local="service_complementaire_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="theme_personnage" isCrossRef="true">
        <column name="theme_id" type="integer" primaryKey="true"/>
        <column name="personnage_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="theme" onDelete="CASCADE">
            <reference local="theme_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="personnage" onDelete="CASCADE">
            <reference local="personnage_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="bon_plan_categorie">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true" />
        <column name="name" type="varchar" />
        <column name="slug" type="varchar" />
        <column name="subtitle" type="varchar" />
        <column name="description" type="longvarchar" />

        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, slug, subtitle, description" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/bon-plan-categories" />
        </behavior>

        <behavior name="sortable"/>
    </table>

    <table name="bon_plan">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true" />
        <column name="name" type="varchar" />
        <column name="slug" type="varchar" />
        <column name="introduction" type="varchar" />
        <column name="description" type="longvarchar" />
        <column name="date_debut" type="date" />
        <column name="date_fin" type="date" />
        <column name="prix" type="integer" />
        <column name="prix_barre" type="integer" />
        <column name="indice" type="varchar" />
        <column name="indice_prix" type="varchar" />
        <column name="image_menu" type="varchar" />
        <column name="image_page" type="varchar" />
        <column name="image_liste" type="varchar" />
        <column name="active_compteur" type="boolean"/>
        <column name="mise_en_avant" type="boolean"/>
        <column name="push_home" type="boolean"/>
        <column name="date_start" type="date"/>
        <column name="day_start" type="enum" valueSet="monday, tuesday, wednesday, thursday, friday, saturday, sunday" required="true"/>
        <column name="day_range" type="enum" valueSet="7, 14, 21" required="true"/>
        <column name="nb_adultes" type="integer" defaultValue="1" />
        <column name="nb_enfants" type="integer" defaultValue="0" />
        <column name="period_categories" type="varchar" />

        <behavior name="active" />

        <behavior name="i18n">
            <parameter name="i18n_columns" value="name, slug, introduction, description, indice, indice_prix" />
        </behavior>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/bons-plans" />
            <parameter name="crud_type_file" value="image_menu,image_page,image_liste" />
        </behavior>
    </table>

    <table name="bon_plan_bon_plan_categorie" isCrossRef="true">
        <column name="bon_plan_id" type="integer" primaryKey="true"/>
        <column name="bon_plan_categorie_id" type="integer" primaryKey="true"/>

        <behavior name="sortable">
            <parameter name="use_scope" value="true" />
            <parameter name="scope_column" value="bon_plan_categorie_id" />
        </behavior>

        <foreign-key foreignTable="bon_plan" onDelete="CASCADE">
            <reference local="bon_plan_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="bon_plan_categorie" onDelete="CASCADE">
            <reference local="bon_plan_categorie_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="bon_plan_etablissement" isCrossRef="true">
        <column name="bon_plan_id" type="integer" primaryKey="true"/>
        <column name="etablissement_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="bon_plan" onDelete="CASCADE">
            <reference local="bon_plan_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="etablissement" onDelete="CASCADE">
            <reference local="etablissement_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="bon_plan_region" isCrossRef="true">
        <column name="bon_plan_id" type="integer" primaryKey="true"/>
        <column name="region_id" type="integer" primaryKey="true"/>

        <foreign-key foreignTable="bon_plan" onDelete="CASCADE">
            <reference local="bon_plan_id" foreign="id"/>
        </foreign-key>

        <foreign-key foreignTable="region" onDelete="CASCADE">
            <reference local="region_id" foreign="id"/>
        </foreign-key>
    </table>

    <table name="demande_annulation">
        <column name="id" type="integer" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="assure_nom" type="varchar" required="true"/>
        <column name="assure_prenom" type="varchar" required="true"/>
        <column name="assure_adresse" type="longvarchar" required="true"/>
        <column name="assure_code_postal" type="varchar" required="true"/>
        <column name="assure_ville" type="varchar" required="true"/>
        <column name="assure_pays" type="varchar" required="true"/>
        <column name="assure_mail" type="varchar" required="true"/>
        <column name="assure_telephone" type="varchar" required="true"/>
        <column name="camping_id" type="integer" required="true"/>
        <column name="camping_num_resa" type="varchar" required="true"/>
        <column name="camping_montant_sejour" type="varchar" required="true"/>
        <column name="camping_montant_verse" type="varchar" required="true"/>
        <column name="sinistre_nature" type="enum" valueSet="demande_annulation.sinistre_nature.annulation, demande_annulation.sinistre_nature.interruption" required="true"/>
        <column name="sinistre_suite" type="enum" valueSet="demande_annulation.sinistre_suite.maladie, demande_annulation.sinistre_suite.accident, demande_annulation.sinistre_suite.autre" required="true"/>
        <column name="sinistre_date" type="varchar" required="true"/>
        <column name="sinistre_resume" type="longvarchar" required="true"/>
        <column name="file_1" type="varchar"/>
        <column name="file_2" type="varchar"/>
        <column name="file_3" type="varchar"/>
        <column name="file_4" type="varchar"/>
        <behavior name="timestampable" />
        <behavior name="active" />

        <foreign-key foreignTable="etablissement">
            <reference local="camping_id" foreign="id"/>
        </foreign-key>

        <behavior name="crudable">
            <parameter name="crud_prefix" value="/demandes-annulation" />
            <parameter name="crud_type_file" value="file_1, file_2, file_3, file_4" />
        </behavior>
    </table>

</database>
