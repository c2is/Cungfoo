{% extends "Annulation/base.twig" %}

{% block leftColumn %}
<h1>{{ "demande_annulation.title" | trans }}</h1>
    <div class="radiusBox2 greyM form">
        <h2>Annuler une réservation</h2>
        <form id="annulationForm" method="post" action="{{ app.request.getRequestURI() }}" novalidate {{ form_enctype(annulationForm) }}>
            <div class="errors">{{ form_errors(annulationForm) }}</div>
            <fieldset>
                <legend class="h4-like">Vos coordonnées</legend>
                <table>
                    <tr>
                        <td class="label">{{ form_label(annulationForm.assure_nom) }}</td>
                        <td class="field">{{ form_widget(annulationForm.assure_nom) }}</td>
                        <td class="label">{{ form_label(annulationForm.assure_prenom) }}</td>
                        <td class="field">{{ form_widget(annulationForm.assure_prenom) }}</td>
                    </tr>
                    <tr>
                        <td class="label">{{ form_label(annulationForm.assure_code_postal) }}</td>
                        <td class="field">{{ form_widget(annulationForm.assure_code_postal) }}</td>
                        <td class="label" rowspan="2">{{ form_label(annulationForm.assure_adresse) }}</td>
                        <td class="field" rowspan="2">{{ form_widget(annulationForm.assure_adresse) }}</td>
                    </tr>
                    <tr>
                        <td class="label">{{ form_label(annulationForm.assure_ville) }}</td>
                        <td class="field">{{ form_widget(annulationForm.assure_ville) }}</td>
                    </tr>
                    <tr>
                        <td class="label">{{ form_label(annulationForm.assure_pays) }}</td>
                        <td class="field">{{ form_widget(annulationForm.assure_pays) }}</td>
                        <td class="label"></td>
                        <td class="field"></td>

                    </tr>
                    <tr>
                        <td class="label">{{ form_label(annulationForm.assure_mail) }}</td>
                        <td class="field">{{ form_widget(annulationForm.assure_mail) }}</td>
                        <td class="label">{{ form_label(annulationForm.assure_telephone) }}</td>
                        <td class="field">{{ form_widget(annulationForm.assure_telephone) }}</td>
                    </tr>
                </table>
            </fieldset>
            <fieldset>
                <legend class="h4-like">Votre réservation</legend>
                <table>
                    <tr>
                        <td class="label">{{ form_label(annulationForm.camping_montant_sejour) }}</td>
                        <td class="field">{{ form_widget(annulationForm.camping_montant_sejour) }}</td>
                        <td class="label">{{ form_label(annulationForm.camping_montant_verse) }}</td>
                        <td class="field">{{ form_widget(annulationForm.camping_montant_verse) }}</td>
                    </tr>
                    <tr>
                        <td class="label">{{ form_label(annulationForm.etablissement) }}</td>
                        <td class="field">{{ form_widget(annulationForm.etablissement) }}</td>
                        <td class="label">{{ form_label(annulationForm.camping_num_resa) }}</td>
                        <td class="field">{{ form_widget(annulationForm.camping_num_resa) }}</td>
                    </tr>
                    <tr>
                        <td class="label">{{ form_label(annulationForm.sinistre_nature) }}</td>
                        <td class="field" colspan="3">{{ form_widget(annulationForm.sinistre_nature) }}</td>
                    </tr>
                    <tr>
                        <td class="label">{{ form_label(annulationForm.sinistre_suite) }}</td>
                        <td class="field" colspan="3">{{ form_widget(annulationForm.sinistre_suite) }}</td>
                    </tr>
                    <tr>
                        <td class="label">{{ form_label(annulationForm.sinistre_date) }}</td>
                        <td class="field">{{ form_widget(annulationForm.sinistre_date) }}</td>
                        <td class="label">{{ form_label(annulationForm.sinistre_resume) }}</td>
                        <td class="field">{{ form_widget(annulationForm.sinistre_resume) }}</td>
                    </tr>
                    <tr>
                        <td class="label">{{ form_label(annulationForm.file_1) }}</td>
                        <td class="field" colspan="3">{{ form_widget(annulationForm.file_1) }}</td>
                    </tr>
                    <tr>
                        <td class="label">{{ form_label(annulationForm.file_2) }}</td>
                        <td class="field" colspan="3">{{ form_widget(annulationForm.file_2) }}</td>
                    </tr>
                    <tr>
                        <td class="label">{{ form_label(annulationForm.file_3) }}</td>
                        <td class="field" colspan="3">{{ form_widget(annulationForm.file_3) }}</td>
                    </tr>
                    <tr>
                        <td class="label">{{ form_label(annulationForm.file_4) }}</td>
                        <td class="field" colspan="3">{{ form_widget(annulationForm.file_4) }}</td>
                    </tr>
                    <tr>
                        <td class="checkbox" colspan="4">{{ form_widget(annulationForm.certifie) }}{{ form_label(annulationForm.certifie) }}</td>
                    </tr>
                </table>
                <button type="submit" class="bt fushia big right" name="annulationForm">Envoyer</button>
                <div style="display: none;">
                    {{ form_rest(annulationForm) }}
                </div>
            </fieldset>
        </form>
</div>
<script type="text/javascript">
    var pjCount = {{ form.pieceJointes | length }} + 1;

    head.ready(function() {
        $('#add-piece-jointe').click(function() {
            var pjList = $('#pieces-jointes-list');

            var newWidget = $('#Annulation_piecesJointes').attr('data-prototype');
            // replace the "__name__" used in the id and name of the prototype
            // end name attribute looks like name="contact[emails][2]"
            newWidget = newWidget.replace(/__name__label__/g, 'Pièce jointe ' + pjCount);
            newWidget = newWidget.replace(/__name__/g, pjCount);
            pjCount++;

            // create a new list element and add it to the list
            var newLi = $('<li></li>').html(newWidget);
            newLi.appendTo($('#pieces-jointes-list'));

            if(pjCount > 4) {
                $('#add-piece-jointe').hide();
            }

            return false;
        });
    })
</script>
{% endblock %}