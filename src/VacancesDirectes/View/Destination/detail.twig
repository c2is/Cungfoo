{% extends "Destination/base.twig" %}

{% block title %}
{% spaceless %}
    {% if destination == constant("VacancesDirectes\\Controller\\DestinationController::DESTINATION_REGION") %}
        {{ "seo.title.region" | trans ({'%region%': item}) }}
    {% elseif destination == constant("VacancesDirectes\\Controller\\DestinationController::DESTINATION_PAYS") %}
        {{ "seo.title.pays" | trans ({'%pays%': item}) }}
    {% endif %}
{% endspaceless %}
{% endblock %}

{% block metaDescription %}
{% spaceless %}
    {% if destination == constant("VacancesDirectes\\Controller\\DestinationController::DESTINATION_REGION") %}
        {{ "seo.meta.region" | trans  ({'%region%': item, '%pays%': item.pays})}}
    {% elseif destination == constant("VacancesDirectes\\Controller\\DestinationController::DESTINATION_PAYS") %}
        {{ "seo.meta.pays" | trans  ({'%pays%': item})}}
    {% endif %}
{% endspaceless %}
{% endblock %}

{% block topLeftColumn %}

    {# Entête ; Lien retour et fil d'ariane ; pour l'instant le fil d'ariane n'est pas dynamisé #}
    <a href="#">{{ "destination.retour" | trans }}</a>

    {# Bloc titre + accroche + picto #}
    {{ "destination.prefixe_titre" | trans }} {{ item.name }} {{ "destination.suffixe_titre" | trans }} {# Titre #}
    {{ item.introduction }} {# Accroche #}
    {{ item.description }} {# Description #}
    {% if item['imagePath'] is defined %}
        <img src="{{ asset(item.imagePath) }}" /> {# Picto région #}
    {% endif %}

{% endblock %}

{% block topRightColumn %}

    {% include 'Form/_search_engine.twig' %}

{% endblock %}

{% block topWideColumn %}

    {# Bloc POIs #}
    {% for poi in sitesAVisiter %}
        {# Le nombre de POIs est limité en PHP en amont, tous les POIs presents ici sont a afficher #}
        <img src="{{ poi.image }}" />
        {{ poi.name }} {# Titre #}
        {{ poi.presentation }} {# Texte #}
    {% endfor %}
    <a href=="#_">{{ "destination.pois_all" | trans }} ({{nbSitesAVisiter}})</a>



    {# Bloc Evenements #}
    {{ "destination.events_title" | trans }}
    {{ "destination.events_prefixe_subtitle" | trans }} {{ item.name }} {{ "destination.events_suffixe_subtitle" | trans }}
    {% for event in events %}
        {# Le nombre d'évènements est limité en PHP en amont, tous les évènements presents ici sont a afficher #}
        <img src="{{ event.image }}" />
        {{ event.name }} {# Titre #}
        {{ event.subtitle }} {# Texte #}
    {% endfor %}

{% endblock %}

{% block bottomLeftColumn %}

    {# Bloc "Notre sélection de campings" #}
    {{ "destination.campings_selection_title" | trans }}
    {% include 'Listing/_listing.twig' %}

{% endblock %}

{% block bottomRightColumn %}

    {# Bloc "Vacances directes un séjour réussi" #}
    {{ "encart_vacances_directes.title" | trans }}
    {{ "encart_vacances_directes.subtitle" | trans }}
    {{ "encart_vacances_directes.item_1" | trans }}
    {{ "encart_vacances_directes.item_2" | trans }}
    {{ "encart_vacances_directes.item_3" | trans }}
    {{ "encart_vacances_directes.item_4" | trans }}

    {# Bloc "Informations" #}
    {{ "encart_informations.title" | trans }}
    {{ "footer.contact.tel" | trans }}
    {{ "encart_informations.price" | trans }}
    {{ "encart_informations.dates_1" | trans }}
    {{ "encart_informations.dates_2" | trans }}

{% endblock %}

{% block bottomWideColumn %}

    {# Bloc GMap #}
    {{ "listing_destination.campings_map_title" | trans }}
    {{ "listing_destination.campings_map_prefixe_subtitle" | trans }} {{ item.name }}
    <div id="destiMap" class="gmap" style="width:616px;height:573px;">
        <script>
            function destiInit() {
                var destiMkrs = [
                    //['title', lat, lont, zindex, 'idAjaxCamping', couleurMarker]
                    {% for etab in list.element %}
                        ['{{ etab.model.name }} {{ etab.model.categorie.stars }}', {{ etab.model.geoCoordinateX }}, {{ etab.model.geoCoordinateY }}, {{ loop.index }}, '{{ path('infobox_camping', {idResalys: etab.model.code}) }}', markerFushia],
                    {% endfor %}
                ];
                var centerDestiMkr = new google.maps.LatLng({{firstEtab.model.geoCoordinateX}},{{firstEtab.model.geoCoordinateY}}),
                        mapOptions = {
                            zoom: 6,
                            mapTypeId: google.maps.MapTypeId.ROADMAP,
                            center: centerDestiMkr
                        };
                destiMap = new google.maps.Map(document.getElementById('destiMap'), mapOptions);
                setMarkers(destiMap, destiMkrs);
            }
        </script>
    </div>



    {# Photos #}
    {{ imagesTitle }}
    {% if item.imageDetail1 %}}
    <img src="{{ asset(item.imageDetail1) }}" />
    {% endif %}
    {% if item.imageDetail2 %}
    <img src="{{ asset(item.imageDetail2) }}" />
    {% endif %}

    <a href="#_">{{ "destination.retour_bottom" | trans }}</a>

{% endblock %}
