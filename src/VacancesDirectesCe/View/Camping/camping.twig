{% extends "base.twig" %}

{% block content %}
<script src="//maps.googleapis.com/maps/api/js?sensor=false"></script>
<script>
    // global maps vars
    var map,
            infowindow = null,
            proxMapLoaded = false,
            infoMapLoaded = false;

    var markerBleu = new google.maps.MarkerImage(templatePath+'images/vacancesdirectes/common/map/markerBleu.png',
            new google.maps.Size(21, 34),
            new google.maps.Point(0,0),
            new google.maps.Point(10, 34));
    var markerVert = new google.maps.MarkerImage(templatePath+'images/vacancesdirectes/common/map/markerVert.png',
            new google.maps.Size(21, 34),
            new google.maps.Point(0,0),
            new google.maps.Point(10, 34));
    var markerFushia = new google.maps.MarkerImage(templatePath+'images/vacancesdirectes/common/map/markerFushia.png',
            new google.maps.Size(21, 34),
            new google.maps.Point(0,0),
            new google.maps.Point(10, 34));
    var shadow = new google.maps.MarkerImage(templatePath+'images/vacancesdirectes/common/map/shadow.png',
            new google.maps.Size(19, 17),
            new google.maps.Point(0,0),
            new google.maps.Point(0, 17));
    var shape = {
        coord: [1, 1, 1, 20, 18, 20, 18 , 1],
        type: 'poly'
    };

    // specific function maps
    var proxMkrs = [
        ['c2is', 45.764544, 4.846512, 5, '<div id="infowindow">C2iS, Agence Digitale à Lyon</div>', markerBleu]
    ];
    function proxInit() {
        var centerproxMkr = new google.maps.LatLng(45.764544,4.846512),
                mapOptions = {
                    zoom: 13,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    center: centerproxMkr
                };
        proxMap = new google.maps.Map(document.getElementById('proxMap'), mapOptions);

        setMarkers(proxMap, proxMkrs);
        infowindow = new google.maps.InfoWindow({ content: "..." });
    }

    var infoMkrs = [
        ['{{ etab.name }}', {{ etab.geoCoordinateX }}, {{ etab.geoCoordinateY }}, 5, '<div id="infowindow">{{ etab.name }}</div>', markerFushia]
    ];
    function infoInit() {
        var centerinfoMkr = new google.maps.LatLng({{ etab.geoCoordinateX }},{{ etab.geoCoordinateY }}),
                mapOptions = {
                    zoom: 13,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    center: centerinfoMkr
                };
        infoMap = new google.maps.Map(document.getElementById('infoMap'), mapOptions);

        setMarkers(infoMap, infoMkrs);
        infowindow = new google.maps.InfoWindow({ content: "..." });
    }

    // global function maps
    function setMarkers(map, mkrs) {
        for (var i = 0; i < mkrs.length; i++) {
            var mkr = mkrs[i];
            var siteLatLng = new google.maps.LatLng(mkr[1], mkr[2]);
            var marker = new google.maps.Marker({
                position: siteLatLng,
                map: map,
                shadow: shadow,
                icon: mkr[5],
                shape: shape,
                title: mkr[0],
                zIndex: mkr[3],
                html: mkr[4]
            });
            var contentString = "";
        }
    }
</script>

<div id="wrap" class="fixed-width clear">

    <div itemscope itemtype="http://schema.org/Place">
        <h1 itemprop="name">{{ etab.name }}{{ etab.categorie.stars }}</h1>
        <p class="keywordsFiche">Club enfants - Parc aquatique - Plage de mer - Accès wifi - Animaux acceptés</p>

        <h2>Camping {{ etab.city }}</h2>
        <div class="geoDataFiche" itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">
            <span itemprop="addressCountry">{{ etab.country }}</span> |
            <span itemprop="addressRegion">{{ etab.ville.region }}</span> |
            <span itemprop="postalCode">{{ etab.zip }}</span>
            <span itemprop="addressLocality">{{ etab.ville }}</span>
            <button class="bt trans cfushia">Situer sur la carte</button>
        </div>
        <div itemprop="geo" itemscope itemtype="http://schema.org/GeoCoordinates">
            <meta itemprop="latitude" content="{{ etab.geoCoordinateX }}">
            <meta itemprop="longitude" content="{{ etab.geoCoordinateY }}">
        </div>
    </div>

    <ul class="tabControls clear">
        <li><a href="#tabCamp" class="active">Le camping</a></li>
        <li><a href="#tabLocation">Les locations</a></li>
        <li><a href="#tabSurplace">Sur place</a></li>
        <li><a href="#tabProximite">A proximité</a></li>
        <!--<li><a href="#tabAvis">Avis</a></li>-->
        <li><a href="#tabInfos">Infos pratiques</a></li>
    </ul>

    <div id="tabCamp" class="tabs">
        <div class="tabCampDiapo">
            <div class="slider"><div class="slide clear">
                {% for media in multimedia %}
                    <img src="{{ asset(media.imagePath) }}" width="616" height="326" alt="{{ media.titre }}" class="{{ media.tagsForDisplay }}"/>
                {% endfor %}
            </div></div>
            <form class="tabCampDiapoOptions clear" action="#_">
                <fieldset class="left">
                    <span>Photos</span>
                    <label for="photosToutes"><input type="radio" id="photosToutes" name="affPhoto" value="all" checked="checked">{{ "Toutes" | trans }}</label>
                    {% for tag in tags %}
                        <label for="photos{{ tag.slug }}"><input type="radio" id="photos{{ tag.slug }}" name="affPhoto" value="{{ tag.slug }}">{{ tag.slug }}</label>
                    {% endfor %}
                </fieldset>
                <fieldset class="right">
                    <a class="popinVideo tabCampVideo" href="{{ etab.videoPath }}" title="Titre de la popin : vidéo">Vidéo</a>
                    <a class="popin360 tabCamp360" href="#_">360°</a>
                </fieldset>
            </form>
        </div>
        <div class="tabCampDesc">
            <h3>{{ etab.title}}</h3>
            <p><strong>{{ etab.capacite }} emplacements | Ouvert du {{ etab.openingDate | date('d M Y') }} au {{ etab.closingDate | date('d M Y') }}</strong></p>
            <p>{{ etab.description }}</p>
        </div>

        <div class="temoignFiche bloc gris">
            <h3>Vous aimerez</h3>
            <h4>comme...</h4>
            <div>
                {% for personnage in personnages %}
                    <div class="temoignFicheIt fish">
                        <span class="perso">{{ personnage.prenom | trans }}</span>
                        <span class="age">{{ personnage.age }} ans</span>
                        <ul>
                            {% for avantage in personnage.avantages %}
                            <li>{{ avantage.name }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endfor %}
            </div>
            <a href="#_" class="bt trans right">Tous les plus du camping</a>
            <hr class="clearboth">
            <h4>Les vacances à Vias</h4>
            <dl>
                <dd class="img"><img src="{{ asset(etab.ville.region.imagePath) }}"></dd>
                <dt>A proximité<br> nous avons listé :</dt>
                <dd class="list">
                   <ul>
                       <li>{{ nbSiteAVisiter }} sites à visiter</li>
                       <li>{{ nbActivitesSportives }} activités sportives</li>
                       <li>{{ nbEvenementsCulturels }} événements culturels</li>
                   </ul>
                </dd>
            </dl>
            <dl>
                <dt>L'événement à ne pas manquer :</dt>
                <dd class="img"><img src="{{ eventPrioritaire.image }}" /></dd>
                <dd class="list event">
                    <strong>{{ eventPrioritaire.name }}<br />
                    {{ eventPrioritaire.strDate }}</strong> {{ eventPrioritaire.address }}<br />
                    {{ eventPrioritaire.zipcode }} {{ eventPrioritaire.city }}<br />
                    Distance du camping : 15 km
                </dd>
            </dl>
            <a href="#_" class="bt trans right">Tout savoir</a>
        </div>
        <nav class="paginationTabs clear">
            <button class="bt trans right triggerClick" data-triggerLink="#tabLocations">Les locations</button>
        </nav>
    </div>
    <!-- tab Sur place -->
    <div id="tabSurplace" class="tabs">
        <img src="{{ asset(etab.planPath) }}" width="616" height="402" alt="{{ etab.name }}">
        <img src="../../../web/images/vacancesdirectes/common/pict/ficheLegendMap.png" alt="Légende du plan du camping" class="right">
        <div class="colSurPlace clearboth">
            <dl>
                <dt><span>Activités</span></dt>
                <dd class="activites"><ul>
                    {% for activite in activites %}
                        <li><img src="{{ asset(activite.imagePath) }}" alt="{{ activite.name }}"><span>{{ activite.name }}</span></span></li>
                    {% endfor %}
                </ul></dd>
            </dl>
            <dl>
                <dt><span>Equipements</span></dt>
                <dd class="equipements"><ul>
                </ul></dd>
            </dl>
            <dl>
                <dt><span>Services complémentaires</span></dt>
                <dd class="services"><ul>
                    {% for serviceComplementaire in servicesComplementaires %}
                        <li><img src="{{ asset(serviceComplementaire.imagePath) }}" alt="{{ serviceComplementaire.name }}"><span>{{ serviceComplementaire.name }}</span></span></li>
                    {% endfor %}
                </ul></dd>
            </dl>
        </div>

        <div class="temoignFiche bloc gris">
            <h3>Vous aimerez</h3>
            <h4>comme...</h4>
            <div>
                <div class="temoignFicheIt fish">
                    <span class="perso">{{ personnageAleatoire.prenom }}</span>
                    <span class="age">{{ personnageAleatoire.age }} ans</span>
                </div>
            </div>
            <div class="slider"><div class="slide">
                {% for avantage in personnageAleatoire.avantages %}
                    <dl>
                        <dd><img src="{{ asset(avantage.imagePath) }}" alt="{{ avantage.name }}" class="boxborder"></dd>
                        <dt>{{ avantage.name }}</dt>
                        <dd>{{ avantage.description }}</dd>
                    </dl>
                {% endfor %}
            </div></div>
        </div>

        <nav class="paginationTabs clear">
            <button class="bt trans left triggerClick" data-triggerLink="#tabLocations">Les locations</button>
            <button class="bt trans right triggerClick" data-triggerLink="#tabProximite">A proximité</button>
        </nav>
    </div>
    <div id=tabInfos class="tabs">
        <div id="infoMap" style="width:616px;height:326px;"><!-- map --></div>
        <h3 class="clearboth">Coordonnées du camping {{ etab.name }}</h3>
        <div class="blCoordGps left">
            <span class="gps">
                GPS : {{ etab.getDmsCoordinates.latitude.d }}° {{ etab.getDmsCoordinates.latitude.m }}' {{ etab.getDmsCoordinates.latitude.s }}", {{ etab.getDmsCoordinates.longitude.d }}° {{ etab.getDmsCoordinates.longitude.m }}' {{ etab.getDmsCoordinates.longitude.s }}"
            </span>
            {{ etab.address1 }}<br />
            {{ etab.address2 }}<br />
            {{ etab.zip }} {{ etab.city }}
        </div>
        <div class="blCoordTel left">
            Tél : {{ etab.phone1 }}<br />
            Fax :{{ etab.phone2 }}
        </div>
        <h3 class="clearboth">Horaires d'ouverture</h3>
        <dl class="blHoraire hRecept left">
            <dt>Réception</dt>
            <dd>{{ etab.ouvertureReception | trans | nl2br }}</dd>
        </dl>
        <dl class="blHoraire hCamp left">
            <dt>Camping</dt>
            <dd>{{ etab.ouvertureCamping | trans | nl2br }}</dd>
        </dl>
        <h3 class="clearboth">Arrivées/Départs</h3>
        {{ etab.arriveesDeparts | trans | nl2br }}

        <nav class="paginationTabs clear">
            <button class="bt trans left triggerClick" data-triggerLink="#tabProximite">A proximité</button>
            <button class="bt trans right triggerClick" data-triggerLink="#tabCamp">Le camping</button>
        </nav>
    </div>
</div>
{% endblock %}
